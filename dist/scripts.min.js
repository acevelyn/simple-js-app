let pokemonRepository = (function() {
  let e = [],
    t = 'https://pokeapi.co/api/v2/pokemon/?limit=150';
  function n(t) {
    e.push(t);
  }
  function o(e) {
    let t = e.detailsUrl;
    return fetch(t)
      .then(function(e) {
        return e.json();
      })
      .then(function(t) {
        (e.imageUrl = t.sprites.front_default),
          (e.height = t.height),
          (e.weight = t.weight),
          (e.types = t.types);
      })
      .catch(function(e) {
        console.error(e);
      });
  }
  function i(e) {
    let t = document.querySelector('.modal-body'),
      n = document.querySelector('.modal-title');
    (n.innerText = ''), (t.innerHTML = '');
    const o = document.createElement('h1');
    o.innerText = e.name;
    const i = document.createElement('p');
    i.innerText = e.name + ' Height: ' + e.height;
    const l = document.createElement('p');
    l.innerText = e.name + ' Weight: ' + e.weight;
    const c = document.createElement('p');
    let r = 'Type(s): ';
    for (let t = 0; t < e.types.length; t++)
      (r = r + e.types[t].type.name + (t != e.types.length - 1 ? ', ' : '')),
        (c.innerText = r);
    let a = document.createElement('img');
    (a.src = e.imageUrl),
      n.appendChild(o),
      t.appendChild(a),
      t.appendChild(i),
      t.appendChild(l),
      t.appendChild(c);
  }
  function l(e) {
    o(e).then(function() {
      i(e);
    });
  }
  return {
    getAll: function() {
      return e;
    },
    add: n,
    addListItem: function(e) {
      let t = document.querySelector('.pokemon-list'),
        n = document.createElement('li');
      n.classList.add('group-list-item');
      let o = document.createElement('button');
      (o.innerText = e.name),
        o.classList.add('button-class'),
        o.classList.add('btn', 'btn-primary'),
        o.setAttribute('data-toggle', 'modal'),
        o.setAttribute('data-target', '#exampleModal'),
        n.appendChild(o),
        t.appendChild(n),
        o.addEventListener('click', function() {
          l(e);
        });
    },
    loadList: function() {
      return fetch(t)
        .then(function(e) {
          return e.json();
        })
        .then(function(e) {
          e.results.forEach(function(e) {
            n({ name: e.name, detailsUrl: e.url });
          });
        })
        .catch(function(e) {
          console.error(e);
        });
    },
    loadDetails: o,
    showModal: i,
    showDetails: l
  };
})();
pokemonRepository.loadList().then(function() {
  pokemonRepository.getAll().forEach(function(e) {
    pokemonRepository.addListItem(e);
  });
});
